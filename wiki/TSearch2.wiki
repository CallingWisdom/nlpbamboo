#summary 编译TSearch2扩展
#labels Phase-Deploy,Featured,Phase-Implementation

= PostgreSQL 分词函数 =

PostgreSQL分词函数需要安装好CNLexizer的系统(不需要CNLexizer源代码)。
如果您的系统中没有安装CNLexizer，请参考：
  * 从源代码安装CNLexizer：HowToBuild
  * CNLexizer 二进制包安装方法：BinaryInstall

== 编译和安装 ==

{{{
$ cd /opt/cnlexizer/exts/postgresql/cnlexizer
$ make
$ sudo make install
}}}

== 创建分词函数 ==
{{{
$ psql
postgres=# \i /usr/local/pgsql/share/contrib/pg_cnlexizer.sql
}}}

== 确保配置文件正确 ==

请确保/etc/cnlexizer.cfg或者/opt/etc/cnlexizer.cfg存在并正确配置。

== 测试 ==

{{{
postgres=# select cnlexizer('中文分词');
 cnlexizer  
------------
 中文 分词 
(1 row)
}}}

= Tsearch2 分词模块 =

Tsearch2分词模块需要安装好CNLexizer的系统以及CNLexizer源代码。安装CNLexizer请参考HowToBuild

== 编译和安装 ==

{{{
$ cd /opt/cnlexizer/exts/postgresql/chinese_parser
$ make
$ make install
}}}

== 创建分词模块 ==
{{{
$ psql
postgres=# \i /usr/local/pgsql/share/contrib/chinese_parser.sql
}}}

== 测试 ==
{{{
$ psql
postgres=# SELECT to_tsvector('chinesecfg', '我爱北京');
      to_tsvector       
------------------------
 '我':1 '爱':2 '北京':3
(1 row)
}}}